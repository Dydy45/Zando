<!doctype html>
<html lang="fr"> 
 <head> 
  <meta charset="UTF-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <title>Panier</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&amp;display=swap" rel="stylesheet"> 
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&amp;display=swap" rel="stylesheet"> 
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> 
 <style type="text/css" id="dcoder_stylesheet">body {
  font-family: 'Poppins', sans-serif;
  line-height: 1.6;
  margin: 0;
  padding: 130px 25px 25px 25px;
  background-color: #f0f0f0;
  color: #333;
}

header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid #ddd;
  background-color: #f5e6da;
  font-family: 'Poppins', sans-serif;
  z-index: 1000;
}

/* Les liens dans la page */
a {
  text-decoration: none;
  color: inherit;
}

/* Style pour le logo */
.logo {
  display: flex;
  align-items: center;
}

/* Taille du logo*/
.site-logo {
  width: 120px;
  height: auto;
}

/* Menu de navigation */
.navigation {
  display: flex;
  gap: 20px;
}

/*Lien du menu de navigation */
.navigation a {
  position: relative;
  color: #000;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
  transition: color 0.25s;
}

.navigation a::after {
  position: absolute;
  content: "";
  inset: 0;
  background-color: black;
  scale: 1 0;
  z-index: -1;
  transition: 0.45s;
  border-radius: 10px;
}

.navigation a:hover {
  color: #fff;
}

.navigation a:hover::after {
  scale: 1 1;
}

.cart {
  position: relative;
  text-decoration: none;
  color: inherit;
}

.cart-badge {
  position: absolute;
  top: -8px;
  right: -8px;
  background-color: red;
  color: white;
  font-size: 12px;
  font-weight: bold;
  border-radius: 50%;
  padding: 3px 6px;
  display: flex;
  justify-content: center;
  align-items: center;
  visibility: hidden; /* Masqué par défaut */
}

.cart-badge.visible {
  visibility: visible; /* Affiche quand des produits sont ajoutés */
}

/* Barre de recherche et Icônes */
.header-actions {
  display: flex;
  align-items: center;
  gap: 20px;
}

.search-bar {
  display: flex;
  position :relative;
  right:5px;
  border: 1px solid #ddd;
  border-radius: 20px;
  padding: 5px 10px;
  background-color: #f9f9f9;
}

.search-bar input {
  border: none;
  outline: none;
  font-size: 14px;
  width: 180px;
  padding: 5px;
}

/* Bouton de la barre de recherche */
.search-bar button {
  background: none;
  border: none;
  cursor: pointer;
}

.search-bar img {
  width: 16px;
  height: 16px;
}

.icons {
  display: flex;
  align-items: center;
  gap: 15px;
  padding-right: 15px;
}

/* Taille et couleur de l'icône */
.material-icons {
  font-size: 24px;
  color: #6B4226;
  cursor: pointer;
}

/*.user-icon {
  display: flex;
  align-items: center;
  gap: 15px;
}*/

/* Menu déroulant */
.dropdown-menu {
  position: absolute;
  top: 100px; /* Distance par rapport à l'icône */
  right: 20px;
  background: rgba(128, 128, 128, 0.6); /* Gris transparent */
  backdrop-filter: blur(10px); /* Effet de flou */
  -webkit-backdrop-filter: blur(10px); /* Support pour Safari */
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Ombre douce */
  border-radius: 8px;
  padding: 10px;
  display: none; /* Masquer par défaut */
  z-index: 1000;
  width: 200px;
}

/* Liens dans le menu */
.dropdown-menu a {
  display: block;
  padding: 10px;
  color: #ffffff;
  text-decoration: none;
  border-radius: 4px;
  font-size: 14px;
}

.dropdown-menu a:hover {
  background-color: #f0f0f0; /* Surbrillance au survol */
}

/* Afficher le menu au survol */
.user-menu:hover .dropdown-menu {
  display: block;
}


.panier {
  max-width: 900px;
  margin: 30px auto;
  padding: 20px;
  background-color: #fff;
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

h1 {
  text-align: center;
  color: rgb(255, 90, 95);
  margin-bottom: 20px;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 20px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

th, td {
  padding: 15px;
  text-align: center;
  border-bottom: 1px solid #ddd;
}

th {
  background-color: rgb(255, 90, 95);
  color: white;
  font-weight: bold;
}

td {
  background-color: #f9f9f9;
}

.image-produit {
  max-width: 60px;
  height: auto;
  border-radius: 5px;
}

.quantite-spinner {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 5px;
}

.quantite-spinner button {
  background-color: #007bff;
  color: white;
  border: none;
  padding: 5px 12px;
  border-radius: 5px;
  cursor: pointer;
  font-size: 16px;
  transition: background-color 0.3s;
}

.quantite-spinner button:hover {
  background-color: #0056b3;
}

.quantite {
  width: 60px;
  text-align: center;
  border: 1px solid #ddd;
  border-radius: 5px;
  padding: 5px;
}

.actions {
  margin-top: 20px;
  display: flex;
  justify-content: space-between;
}

.actions button {
  background-color: #007bff;
  color: white;
  border: none;
  border-radius: 5px;
  padding: 10px 20px;
  font-size: 16px;
  cursor: pointer;
  transition: background-color 0.3s;
}

.actions button:hover {
  background-color: #0056b3;
}

.total {
  margin-top: 20px;
  text-align: right;
  font-size: 18px;
}

.total p {
  margin: 10px 0;
  font-weight: bold;
}

.total p strong {
  color: #007bff;
}

button {
  cursor: pointer;
}

button:hover {
  opacity: 0.9;
}

.btn-supprimer {
  background-color: transparent; /* Bouton transparent */
  border: none;
  color: #dc3545; /* Couleur rouge */
  font-size: 18px; /* Taille de l'icône */
  cursor: pointer;
  transition: transform 0.2s ease;
}

.btn-supprimer:hover {
  transform: scale(1.2); /* Légère mise en avant au survol */
  color: #bd2130; /* Rouge plus sombre au survol */
}

/* Effet sur le tableau */
tr:hover td {
  background-color: #f1f1f1;
}

/* Réduction de la taille des boutons sur mobile */
@media (max-width: 768px) {
  .quantite-spinner button {
    padding: 5px 8px;
    font-size: 14px;
  }

  .actions button {
    padding: 8px 16px;
    font-size: 14px;
  }

  .quantite {
    width: 50px;
  }
}

/* Styles généraux (inchangés) */

/* Mise en valeur du bouton "Passer à la caisse" */
.total button {
  background-color: #28a745; /* Vert pour attirer l'attention */
  color: white;
  font-size: 18px; /* Plus grand que les autres boutons */
  /* Taille plus importante */
  font-weight: bold;
  border: none;
  cursor: pointer;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Ombre pour le faire ressortir */
  transition: all 0.3s ease;
  padding: 10px 15px;
  border-radius: 5px;
  transition: background-color 0.3s ease;
}

.total button:hover {
  color: #28a745;
  text-decoration: none;
  background: transparent; /* Couleur légèrement plus sombre au survol */
  border: 1px solid #28a745;
  transform: translateY(-2px); /* Légère élévation au survol */
  box-shadow: 0 6px 10px rgba(0, 0, 0, 0.2); /* Augmentation de l'ombre */
}

/* Réduction des boutons secondaires pour faire ressortir "Passer à la caisse" */
.actions button {
  font-size: 16px; /* Taille légèrement réduite */
  padding: 8px 15px;
  background-color: rgb(255, 90, 95); /* Couleur standard pour les boutons secondaires */
  border-radius: 5px;
}

.actions button:hover {
  background-color: rgb(224, 72, 77);
}

/* Alignement pour que "Passer à la caisse" se démarque */
.total {
  margin-top: 30px;
  text-align: center; /* Centrer le bouton dans la section */
}</style></head> 
 <body> 
  <header>
    <div class="logo">
      <img src="logo/zando-logo.png" alt="Zando" class="site-logo">
    </div>
    <nav class="navigation">
      <a href="index.html">Accueil</a>
      <a href="contact.html">Contact</a>
      <a href="a-propos.html">À propos</a>
      <a href="connexion.html">Se connecter</a>
    </nav>
    <div class="header-actions">
      <div class="search-bar">
        <input type="text" placeholder="Que cherchez-vous ?">
        <button>
          <a href="recherche.html"><span class="material-icons">search</span></a>
        </button>
      </div>
      <div class="icons">
        <a href="favoris.html">
          <span class="material-icons">favorite</span>
        </a>
        <a href="panier.html" class="cart">
          <span class="material-icons">shopping_cart</span>
          <span class="cart-badge" id="cart-badge">0</span>
        </a>
        <div class="user-menu">
          <span class="material-icons user-icon">account_circle</span>
          <div class="dropdown-menu">
            <a href="compte.html">Gérer mon compte</a>
            <a href="commandes.html">Mes commandes</a>
            <a href="annulations.html">Mes annulations</a>
            <a href="avis.html">Mes avis</a>
            <a href="connexion.html" id="logout-link">Déconnexion</a>
          </div>
        </div>
      </div>
    </div>
  </header> 
  <section class="panier"> 
   <h1>Panier</h1> 
   <table> 
    <thead> 
     <tr> 
      <th>Image</th> 
      <th>Produit</th> 
      <th>Prix</th> 
      <th>Quantité</th> 
      <th>Sous-total</th>
      <th>Supprimer</th>
     </tr> 
    </thead> 
    <tbody> 
     <tr> 
      <td><img src="images/screen.jpg" alt="Écran LCD" class="image-produit" width="50"></td> 
      <td>Écran LCD</td> 
      <td class="prix">650 $</td> 
      <td> 
       <div class="quantite-spinner"> <button class="btn-decrementer">-</button> 
        <input type="number" class="quantite" value="1" min="1"> <button class="btn-incrementer">+</button> 
       </div> </td> 
      <td class="sous-total">650 $</td>
      <td>
        <button class="btn-supprimer" data-id="1"><span class="material-icons" id="delete">delete</span>
        </button>
      </td>
     </tr> 
     <tr> 
      <td><img src="images/controller.jpg" alt="Manette H1" class="image-produit" width="50"></td> 
      <td>Manette H1</td> 
      <td class="prix">550 $</td> 
      <td> 
       <div class="quantite-spinner"> <button class="btn-decrementer">-</button> 
        <input type="number" class="quantite" value="1" min="1"> <button class="btn-incrementer">+</button> 
       </div> </td> 
      <td class="sous-total">550 $</td>
      <td>
        <button class="btn-supprimer" data-id="1">
          <span class="material-icons">delete</span>
        </button>
      </td>
     </tr> 
    </tbody> 
   </table> 
   <div class="actions"> <button>Retour à la boutique</button> <button id="update-cart">Mettre à jour le panier</button> 
   </div> 
   <div class="total"> 
    <p>Sous-total : <strong id="total-sous-total">0 $</strong></p> 
    <p>Livraison : <strong id="frais-livraison">Gratuite</strong></p> 
    <p>Total : <strong id="total-general">0 $</strong></p> <button>Passer à la caisse</button> 
   </div> 
  </section> 
 
<script>
// Fonction pour afficher les produits dans le tableau du panier
function displayCartItems() {
  const cart = JSON.parse(localStorage.getItem('cart')) || []; // Récupérer le panier depuis le LocalStorage
  const cartItemsContainer = document.querySelector('tbody');
  cartItemsContainer.innerHTML = ''; // Réinitialiser l'affichage

  let sousTotal = 0;

  cart.forEach(product => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td><img src="${product.image}" alt="${product.name}" class="image-produit" width="50"></td>
      <td>${product.name}</td>
      <td class="prix">${product.price.toFixed(2)} $</td>
      <td>
        <div class="quantite-spinner">
          <button class="btn-decrementer" data-id="${product.id}">-</button>
          <input type="number" class="quantite" value="${product.quantity}" min="1" data-id="${product.id}">
          <button class="btn-incrementer" data-id="${product.id}">+</button>
        </div>
      </td>
      <td class="sous-total">${(product.price * product.quantity).toFixed(2)} $</td>
      <td>
        <button class="btn-supprimer" data-id="${product.id}">
          <span class="material-icons">delete</span>
        </button>
      </td>
    `;
    cartItemsContainer.appendChild(row);

    sousTotal += product.price * product.quantity; // Calculer le sous-total
  });

  updateTotalWithShipping(sousTotal);
}

// Gestion de l'incrémentation/décrémentation des quantités
document.addEventListener('click', function (e) {
  if (e.target.classList.contains('btn-incrementer') || e.target.classList.contains('btn-decrementer')) {
    const productId = e.target.dataset.id;
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const product = cart.find(item => item.id === productId);

    if (product) {
      if (e.target.classList.contains('btn-incrementer')) product.quantity++;
      else if (product.quantity > 1) product.quantity--;

      localStorage.setItem('cart', JSON.stringify(cart));
      displayCartItems();
    }
  }
});

// Gestion de la suppression des produits
document.addEventListener('click', function (e) {
  if (e.target.closest('.btn-supprimer')) {
    const productId = e.target.closest('.btn-supprimer').dataset.id;
    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    cart = cart.filter(item => item.id !== productId); // Supprimer l'élément
    localStorage.setItem('cart', JSON.stringify(cart)); // Mettre à jour le LocalStorage
    displayCartItems();
  }
});

// Mise à jour du total avec frais de livraison
function updateTotalWithShipping(sousTotal) {
  const isFirstOrder = true;
  const fraisLivraisonFC = isFirstOrder ? 0 : 6000;
  const tauxConversion = 2850; // 1 $ = 2850 FC
  const fraisLivraisonUSD = fraisLivraisonFC / tauxConversion;

  const total = sousTotal + fraisLivraisonUSD;

  document.getElementById('total-sous-total').textContent = `${sousTotal.toFixed(2)} $`;
  document.getElementById('frais-livraison').textContent = fraisLivraisonFC === 0 ? 'Gratuit' : `${fraisLivraisonFC} FC`;
  document.getElementById('total-general').textContent = `${total.toFixed(2)} $`;
}

// Réinitialisation du panier
function resetCart() {
  localStorage.removeItem('cart'); // Supprimer les données du LocalStorage
  displayCartItems(); // Réinitialiser l'affichage
}

// Gestion du chargement de la page
document.addEventListener('DOMContentLoaded', () => {
  displayCartItems();

  // Gestion des boutons "Mettre à jour le panier" et "Retour à la boutique"
  document.getElementById('update-cart').addEventListener('click', resetCart);
  document.querySelector('.actions button:first-child').addEventListener('click', () => {
    window.location.href = 'index.html';
  });
});</script>
<script type="module" src="supabaseClient.js"></script>
<script type="module" src="scripts/deconnexion.js"></script>
<!-- removed testFirebase.js for production -->
</body>
</html>